# 1부 HTTP: 웹의 기초
## 1. HTTP 개관
### 1.1 HTTP
### 1.2 웹 클라이언트와 서버
### 1.3 리소스
### 1.4 트랜잭션
### 1.5 메시지
### 1.6 TCP 커넥션
### 1.7 프로토콜 버전
### 1.8 웹의 구성요소
***
## 2. URL과 리소스
## 3. HTTP 메시지
## 4. 커넥션 관리
***
# 1장 HTTP 개관
HTTP는 현대 인터넷 공용어로 전 세계 웹 브라우저, 서버, 앱, 모두 HTTP를 통해 통신한다.

## 1) HTTP
HTTP는 전 세계의 웹 서버로부터 대량의 리소스를 빠르고, 간편하고, 정확하게 PC 에 설치된  웹브라우저로 옮겨준다.

* HTTP는 신뢰성 있는 데이터 전송 프로토콜 사용
* 전송 중 손상되거나 꼬이지 않음
* 정보 손상된 게 아닌지 염려하지 않아도 됨
* 개발자는 다른 요소를 고려할 거 없이 애플리케이션 기능을 구현하면 됨
***
## 2) 웹 클라이언트와 서버

웹 서버 : HTTP 서버. 데이터 저장, 리소스 제공
클라이언트 서버 : 사용자의 동작을 통해 서버에 요청
***
## 3) 리소스

웹 서버는 웹 리소스를 관리하고 제공하고, 웹 리소스는 웹 콘텐츠의 원천.

웹 리소스는 정적, 동적 파일로써 존재 할 수 있고, 리소스는 요청에 따라 콘텐츠를 생산하는 프로그램이 될 수도 있다.
### 1] 미디어 타입
인터넷은 수천 가지 데이터 타입을 다루는데, 웹에서 전송된 객체 각각에 MIME 타입의 데이터 포맷 라벨을 붙인다. 

MIME(Multipurpose Internet Mail Extension) : 전자메일 시스템 사이에서 메시지가 오갈 때 생기는 문제점을 해결하기 위해 설계 된 타입으로써, well-made type이라 HTTP 에서도 멀티미디어 콘텐츠를 기술하고 라벨을 붙이기 위해 채택.

웹 서버는 모든 HTTP 객체 데이터에 MIME type을 붙이고, 클라이언트는 res 에서 MIME 타입을 통해 다룰 수 있는 객체인지 확인함.

MIME Type은 주 타입 / 부 타입으로 이루어진 문자열 라벨

### 2] URI
서버 리소스 이름을 통합 자원 식별자(Uniform Resource Identifier, URI) 라고 부른다.
URI 는 URL과 URN 으로 구분되는데

`URL` : 통합 자원 지시자(Uniform Resource Locator, URL) 은 리소스 식별자의 가장 흔한 형태로 특정 서버의 한 리소스에 대한 구체적인 위치를 서술한다.

즉, 소스가 어디에 있고, 어떻게 접근할 수 있는지 말해준다.

URL은 세 부분으로 이루어진 표준 포맷을 따르는데,  
https://comic.naver.com/webtoon/weekdayList.nhn?week=thu 에서  
https 는 스킴이라고 불리며, 리소스에 접근하기 위해 사용되는 프로토콜을 서술한다.  
comic.naver.com : 서버의 인터넷 주소  
/webtoon/weekdayList.nhn?week=thu : 웹 서버의 리소스  
**오늘날  대부분 URI는 URL**

`URN` : 통합 자원 이름(Uniform Resource Name)
콘텐츠를 이루는 한 리소스에 대해, 리소스의 위치에 영향을 받지 않는 unique한 이름
***
## 4) 트랜잭션
HTTP 트랜잭션은 req 와 res로 구성된다. 이 상호작용은 HTTP 메시지라고 불리는 정형화된 데이터 덩어리를 이용해 이루어진다.  

### 1] 메서드
HTTP는 HTTP 메서드의 요청 명령을 지원하는데, HTTP req는 한 개의 메서드를 가지며, 서버에게 어떤 동작이 취해져야 하는지 말해준다.

### 2] 상태 코드
모든 HTTP res 메시지는 상태코드와 함께 반환되며 사유 구절도 함께 내보낸다.

### 3] 웹페이지는 여러 객체로 이루어질 수 있다.
애플리케이션은 하나의 작업을 수행하기 위해 여러 HTTP 트랜잭션을 수행한다. 즉, 웹 페이지는 하나의 리소스가 아닌 리소스의 모음이다.
***
## 5) 메시지
HTTP 메시지는 단순한 줄 단위의 문자열이며, 일반 텍스트 형식을 취한다.

HTTP 메시지는 세가지로 나뉘게 되는데

    GET /test/hi-there.txt HTTP/1.0 | 시작줄 | HTTP/1.0 200 OK
    --------------------------------         --------------------------------
    Accept: text/*                  | 헤더   | Content-type: text/plain
    Accept-Language: en, fr         |        |Content-length: 19
    --------------------------------         --------------------------------
                                      본문   | Hi! I'm a message!

시작줄 : 무엇을 해야하고, 무슨 일이 일어났는지 나타냄

헤더 : 시작줄 다음 0개 이상의 헤더 필드가 이어지고, key-value 형식으로 헤더가 구성된다. 그리고 헤더는 빈 줄로 끝난다

본문 : 헤더의 빈 줄 다음에 어떤 종류의 데이터(텍스트 형식 뿐만 아니라 이진 데이터도 들어감)가 들어온다.
***
## 6) TCP 커넥션
HTTP 메시지는 TCP 커넥션을 통해 한 곳에서 다른 곳으로 옮겨가게 된다
### 1] TCP/IP
HTTP는 애플리케이션 계층 프로토콜로써 Application layer 영역만 다루고 그 이후의 부분은 대중적이고 신뢰성 있는 인터넷 전송 프로토콜인 TCP/IP에게 위임.

TCP는 오류 없는 데이터를 전송하며 순서에 맞게, 조각나지 않는 데이터 스트림을 통해 전송한다.

TCP/IP는 TCP와 IP가 층을 이루는 패킷 교환 네트워크 프로토콜의 집합.  
TCP IP는각 네트워크와 하트웨어의 특성을 숨기고, 어떤컴퓨터나 네트워크든 신뢰성 있는 의사소통을 하게 해준다.

TCP 커낵션이 맺어지면 클라이언트와 서버 컴퓨터 간에 교환되는 메시지가 없어지거나 손상되거나, 순서가 뒤바뀌어 수신되는 일은 결코 없다

    HTTP 네트워크 프로토콜 스택
    ------------------------------------------------
    HTTP                        | Application Layer
    TCP                         | Transfer Layer
    IP                          | Network Layer
    LINK INTERFACE FOR NETWORK  | DataLink Layer
    PHYSICAL NETWORK HARDWARE   | Physical Layer

### 2] 접속 방법
HTTP Client가 Server 에 req 하기 전에 IP(Internet Protocol) 주소와 포트번호를 사용해 클라이언트와 서버 간 TCP/IP Connection을 맺어야 함

Client는 호스트명을 알고, 이를 DNS(Domain Name Service)에 요청하여 IP를 얻고, 프로토콜로 PORT NUM을 확인하여 TCP/IP 통신을 한다.

이러한 순서를 조금 더 정리하면

    1. 웹 브라우저는 서버의 URL에서 호스트 명 추출
    2. 웹브라우저는 서버의 호스트 명을 IP로 변환(Through DNS)
    3. 웹 브라우저는 URL에서 포트번호 추출(있다면, 또는 프로토콜의 DEFAULT로)
    4. 웹브라우저는 웹 서버와 TCP 커넥션을 맺음
    5. 웹브라우저는 서버에 HTTP req
    6. 서버는 웹브라우저에 HTTP res
    7. 커넥션이 닫히면 웹브라우저는 문서를 Rendering
***

## 7) 웹의 구성요소 
`프락시` : 클라이언트와 서버 사이에 위치한 HTTP 중개자  
웹 보안, 애플리케이션 통합, 성능 최적화 할 때 중요한 요소. 중개 서버의 역할.  

`캐시` : 많이 찾는 웹페이지를 클라이언트에 가까이 보관하는 창고 역할  
웹캐시와 캐시 프락시는 자신을 거쳐 가는 문서들 중 자주 찾는 것의 사본을 저장해 주는 특별한 종류의 프락시 서버  

`게이트웨이` : 다른 애플리케이션과 연결된 특별한 웹서버  
다른 서버들의 중개자로 동작. 주로 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용  

`터널` : 단순히 HTTP 통신을 전달하기만 하는 특별한 프락시  
두 커넥션 사이에 날 데이터를 열어보지 않고 그대로 전달해주는 HTTP 애플리케이션