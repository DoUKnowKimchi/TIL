## 랜카드 (Network Interface Card)
***
유저의 데이터를 케이블에 실어서 허브나 스위치, 라우터 등으로 전달해주고 

자신에게 온 데이터를 CPU에 전달해주는 역할을 한다.

사용환경에 따라서 이더넷용 랜카드, 토큰링용 랜카드, FDDI, ATM용 랜카드 등으로 구분

    랜에 접속하기 위한 카드로 어디에 설치하느냐에 따라 데스크탑용 랜카드,  노트북용 랜카드(PCMCIA)가 있다.

모양은 다르나 하는일은 다 똑같다. 그러나 PC와 연결할 때 접속하는 방법에 차이가 있다.

데스크탑용 랜카드를 선택하는 경우 생각해야 할게 몇가지 있는데 그중 하나가 PC의 bus 방식.

    1. PCI
    2. ISA
    3. EISA
***

    속도에 따른 구분 : 요즘 대세는 100Mbps ~ 1Gbps
    여기에 Overhead가 더해져서 이 속도는 아니지만 60%~80% 정도 성능을 내고 있으면 괜찮은 것.
    접속하는 케이블의 종류에 의한 구분 : TP포트를 가진 랜카드, BNC나 AUI 포트를 가진 랜카드, 광케이블과 접속하는 랜카드

    요새는 AUI나 BNC를 거의 사용하지 않고 UTP용 커넥터를 사용하는게 일반적.
***
## 허브 : Multiport Repeater

    *   포트가 많이 붙어있고 데이터를 그대로 재전송 한다. 한 포트로 들어온 데이터를 나머지 모든 포트로 뿌려준다.(Flooding, 플러딩)

    * 2000년대를 넘어서는 순수한 허브는 사장되었고 모두 스위치로 교체되었다.

    * 100Gbps 이상의 초고속 전송에서는 패킷을 확인하는 오버헤드가 워낙 크기에, 허브가 아직 사용되고는 있다


    *   허브의 연결 단자에 따라 몇 포트 허브다 라고 이야기 함.

    *   랜카드가 설치된  각각의 PC들은 케이블을 타고 허브에 연결된다.

    *   같은 허브에 연결된 PC끼리는 서로 통신이 가능하다.

    *   랜카드와 같이 이더넷용과 토큰링용이 있으며 속도에 따라 종류도 다르다. 즉 랜카드에 맞는 허브를 사용하는 것이 좋다.

    * 허브는 리피터의 기능도 가지고 있다.

    * 리피터 : 중간에 들어온 데이터를 다른 쪽으로 전달해 주는 장치

    * 허브는 이더넷허브일 경우 CSMA/CD의 적용을 받아서 Collision Domain에 있기에 Collision이 발생한다.
***

### 1. Intelligent hub : NMS(Network Management System)을 통해 관리 가능
    NMS에서 모든 데이터를 분석할 뿐만 아니라 제어도 가능. 멀리 있는 허브 관리 가능.

    Auto partition 기능이 있어 이상 있는 PC를 isolate 할 수 있다.
***
### 2. Dummy hub(Semi inteligent) : NMS를 통해 관리 불가.
    더미 허브인데, Intelligent hub와 연결하면 Intelligent hub가 된다. 혼자 있을 땐 dummy hub.
***
### 3. Stackable hub : Stack이 가능한 허브. <-> StandAlone(단독)
    Stackable hub 끼리 연결하면 Backplane(장비 간 데이터 전송을 위해 연결된 일종의 고속 도로)이 훨씬 빨라지고 hub중 하나가 고장나도 다른 hub에 영향을 미치지 않음.
***
### 허브의 한계
    한순간에 한 PC만 데이터를 보낼 수 있다.
    그렇기에 Collision Domain 영역이 커지면 통신의 속도가 점점 떨어진다.
    이를 나누어 주는 장비로 Bridge 또는 Switch가 있다. Bridge보다 Switch가 빠르기에 Bridge는 사라지고 있는 추세.
***
## Switch(스위치, Switching hub)
    허브가 한 포트로 신호가 들어오면 같은 신호를 다른 모든 포트로 전달하는 것에 비해, 스위치는 신호를 필요로하는 포트로만 신호를 전달한다. 따라서 스위치에서는 불필요한 트래픽이 감소하게 되며, 이는 곧 네트워크에서의 데이터 전송 속도의 향상으로 이어진다.  
    포트별로 Collision Domain을 나누다.

    이를 위해서는 지나가는 트래픽의 목적지를 정확하게 알 수 있어야 한다. 그래서 스위치에서는 자신과 연결된 장비들의 MAC 주소와 그 장비가 연결된 포트를 기억해 뒀다 자신이 아는 MAC 주소로 데이터가 오면 알고있던 포트로 데이터를 전달한다. 그리고 데이터가 들어왔는데 데이터를 보낸 장비의 MAC 주소가 처음 보는 MAC 주소면 연결된 포트와 MAC 주소를 저장해뒀다가 다른 장비가 그 MAC 주소로 데이터를 보내면 알고있던 포트로 데이터를 전달한다. 만약 데이터를 보낸 장비의 MAC 주소는 아는 주소인데 데이터 도착지의 MAC 주소가 처음 보는 MAC 주소면 데이터를 모든 포트로 뿌려버린다.

    스위치는 신호를 필요로 하지 않는 포트로는 신호를 전달하지 않기 때문에 콜리전 도메인(collision domain)을 나누는데 사용할 수 있다.

    참고로 IP 주소를 기반으로 동작하는 상위 장비의 경우, 'IP 스위치' 또는 'L3 스위치' 라고 부른다. L3 스위치와 비슷하면서도 다른 것으로 라우터 라는 것이 있다.[1]

    스위치를 간단하게 정리하자면, 라우터에 붙어있는 네트워크 포트 수가 부족할 때 따로 연결해서 사용하는 기계이다.

    허브(Shared Ethernet)이 한 번에 한 노드만 보낼 수 있는 도로라면, Switch는 포트 수별로 차선이 만들어지는 도로이다.

    데이터 처리속도 : Hub > Switch

    서버와의 통신은 어느 한순간에는 하나의 PC만 가능하다(만약 하나의 Server만 존재하는 경우)

***

## 브리지(Bridge)
Collision Domain이 커질수록 CSMA/CD에 의한 통신 효율이 저하가 되는데 이를 해결하는 방법으로 스위치나 브리지를 사용해야 한다.  
    
    EX) 허브로 만들어진 Collision Domain을 절반으로 나누고, 그 사이에 다리를 놓는것
***
## 브리지, 스위치가 하는일 (Date Link Layer)
    Learning : 배운다. 출발지의 MAC Address를 자신의 MAC Address Table에

    Flooding : 모르면 들어온 포트를 제외한 다른 모든 포트로 뿌린다. : 어떤 
    프레임에 대해 브리지를 열어 줄 것인가? 목적지 Address가 없으면 나머지를 포트로 뿌려준다. 이런 Flooding은 Unicast가 아닌 Broadcast와 Unicast에 발생.

    Forwarding : 해당 포트로 건네준다 : Bridge가 목적지의 MAC address를 자신의 Bridge Table에 가지고 있고, 목적지가 다리를 건너야 할 경우 Forwarding 발생.
    Flooding과 달리 Forwarding은 특정 MAC Address에게만 보낸다.

    Filtering : 다른 포트로는 못가게 막는다 Bridge가 목적지의 MAC Address를 알고, 출발지와 목적지가 같은 세그먼트에 있는 경우. 이 때 막는 Filtering이 발생.

    Aging : 나이를 먹는다. Learing하고 데이터를 버리는 주기가 Default로 5분. 5분이 지나도록 새로운 프레임이 들어오지 않으면 Bridge Table에서 해당 MAC Address를 삭제한다. => 300초 이내로 들어오게 하는걸 Refresh 한다고 함.
***
## 브리지와 스위치의 차이점
    1. 처리방식의 차이.
        스위치는 처리 방식이 HW에서, 브리지는 SW에서 처리. 속도에서 스위치가 우위를 가짐.
        스위치는 ASIC(Application-Specific Inegrated Circuit) 방식이기 때문에 프레임 처리 속도도 더 빠르다.

    2. 브리지는 포트들이 같은 속도를 지원하나 스위치는 다른 속도를 연결해줄 수 있는 기능을 제공.

    3. 스위치가 브리지에 비해 제공하는 포트 수가 훨씬 많다.
    
    4. 스위치는 Cut-through 또는 Store-and-forward 방식을 사용하나 브리지는 Store-and-forward만 사용.

    ##
        Stored-and-forwarding : 스위치나 브리지가 일단 들어오는 프레임을 전부 받아 들인 후 처리하는 방식.
        프레임을 모두 받아들이고 이 프레임이 제대로 들어왔는지, 에러는 없는지, 출발지 주소는 어디이며 목적지 주소는 어디인지 파악해서 처리 해 줌.
        에러가 발견되면 브리지나 스위치는 프레임을 버리고 재전송을 요구하기 때문에 에러 복구 능력이 뛰어나다.
        회선에 에러가 자주 발생하거나 출발지와 목적지의 전송 매체가 다른 경우 사용

        Cut-through : 스위치가 들어오는 프레임의 목적지 주소만 본 후 바로 전송 처리를 시작 하는 방식. 처음 들어오는 48bit 만 보게 된다.
        훨씬 더 빨리 처리하나, 에러 복구 능력에 약한데 이 2가지 방식의 장점만을 결합한 방식이 Fragment-free 방식

        Fragment-free : 전체 프레임이 다 들어올 때까지 기다릴 필요가 없으면서 48bit만 보는게 아니라 512bit 까지 봄. 그러나 요새 하드웨어 성능이 좋아지면서 Cut-through와 Stored-and-forwarding간 차이가 크지 않다.
***
## Looping
  Broadcast로 인해 각 스위치가 패킷을 계속 전송, broadcast 하면서 네트워크에서 무한정 돌고 있고, 다른 PC들은 데이터 전송을 못하는 상황  
  해결 : Spanning Tree Algorithm  
  스위치나 브리지에 두 개 이상의 경로가 만들어지면 루핑이 발생할 수도 있음.  
  그러나 Spanning Tree Algorithm으로 인해 루핑이 발생할 수 있는 상황을 미리 막아주는 역할을 한다.   
  실제 링크는 두 개 이나 데이터는 한쪽으로만 다니게 하는 것.
  남은 하나는 Fault Tolerant 역할을 함.

## Fault Tolerant와 Load Balancing
    Fault Tolerant : 네트워크상 문제가 발생할 때를 대비해 미리 장애 대비를 해놓는 것.
    장애 대비책으로 이중 구조를 의미하고, 전체 네트워크가 하나의 지점에서 발생한 장애로 인해 영향을 받는 것을 방지하기 위한 대책

    Load Balancing : 로드를 분산하는 것.  대부분의 로드 밸런싱은 Fault Tolerant가 가능하다. 그러나 Fault tolerant는 Road balancing이 안되는 경우도 있다.